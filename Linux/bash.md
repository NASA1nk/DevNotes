## set

`set -u` 

- 检查脚本内的变量，如果有变量未被定义将终止脚本（脚本的自检测功能）
- 如果不使用`set -u`，那么脚本将会忽略错误，完整执行，并不会报错

> 默认是不检测变量是否赋值

`set -e`

- 如果不使用`set -e`，脚本即使遇到错误也可以继续执行下去
- `set -e`可以看做是安装类脚本的必备，如果前面的安装就有错误了，那么后面的执行毫无意义

> 可以认为这个是debug模式的开启命令，相当于打了一个debug断点，遇到错误就停止执行脚本了
>
> 脚本需要十分强的健壮性

`set -o pipefail`

- 检测脚本内的组合命令（管道命令）的debug模式，需要配合`set -e`先开启debug模式，然后在单独针对管道命令检测脚本的健壮性

> 管道命令如果有部分执行成功那么脚本就会认为是执行成功的，即使有`set -e`也检测不到错误

`set -x`和`set +x`

- **显示脚本执行过程并将脚本内的变量的值暴露出来**的一个开关
- -x是开启，+x是关闭，脚本默认是关闭这个显示过程的

> 在脚本内使用`set -x`等于脚本执行时加上`-x`参数，即`bash -x  `或`source -x`